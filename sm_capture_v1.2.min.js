!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).uuidv4=t()}(this,function(){"use strict";var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function n(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}for(var r=[],i=0;i<256;++i)r.push((i+256).toString(16).substr(1));return function(e,t,i){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){for(var s=i||0,a=0;a<16;++a)t[s+a]=o[a];return t}return function(e,t){var n=r;return(n[e[0]]+n[e[1]]+n[e[2]]+n[e[3]]+"-"+n[e[4]]+n[e[5]]+"-"+n[e[6]]+n[e[7]]+"-"+n[e[8]]+n[e[9]]+"-"+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]).toLowerCase()}(o)}}),function(){var e=function(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};if(e.userAgent=null,e.getUserAgent=function(){return this.userAgent},e.setUserAgent=function(e){this.userAgent=e},e.isAndroid=function(){return this.getUserAgent().match(/Android/i)},e.isBlackBerry=function(){return this.getUserAgent().match(/BlackBerry/i)},e.isBlackBerryPlayBook=function(){return this.getUserAgent().match(/PlayBook/i)},e.isBlackBerry10=function(){return this.getUserAgent().match(/BB10/i)},e.isIOS=function(){return this.isIPhone()||this.isIPad()||this.isIPod()},e.isIPhone=function(){return this.getUserAgent().match(/iPhone/i)},e.isIPad=function(){return this.getUserAgent().match(/iPad/i)},e.isIPod=function(){return this.getUserAgent().match(/iPod/i)},e.isOpera=function(){return this.getUserAgent().match(/Opera Mini/i)},e.isWindows=function(){return this.isWindowsDesktop()||this.isWindowsMobile()},e.isWindowsMobile=function(){return this.getUserAgent().match(/IEMobile/i)},e.isWindowsDesktop=function(){return this.getUserAgent().match(/WPDesktop/i)},e.isFireFox=function(){return this.getUserAgent().match(/Firefox/i)},e.isNexus=function(){return this.getUserAgent().match(/Nexus/i)},e.isKindleFire=function(){return this.getUserAgent().match(/Kindle Fire/i)},e.isPalm=function(){return this.getUserAgent().match(/PalmSource|Palm/i)},e.isAny=function(){var t=!1,n=Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]});for(var r in n)if("setUserAgent"!==n[r]&&"getUserAgent"!==n[r]&&"isAny"!==n[r]&&"isWindows"!==n[r]&&"isIOS"!==n[r]&&e[n[r]]()){t=!0;break}return t},"function"!=typeof window&&"object"!=typeof window||e.setUserAgent(navigator.userAgent),"undefined"!=typeof exports){var t=function(t){return(t=void 0===t||t)?function(t,n,r){var i=t.headers["user-agent"]||"";e.setUserAgent(i),t.SmartPhone=e,"function"==typeof n.locals?n.locals({SmartPhone:e}):n.locals.SmartPhone=e,r()}:e};"undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports=t}else this.SmartPhone=e}.call(this),function(){var e=this,t=function(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};let n=function(){let t=["log","warn","error","assert"];return"localhost"==window.location.hostname&&t.push("debug"),t.forEach(t=>{e[t]=function(){var e=Array.prototype.slice.call(arguments);console[t].apply(console,e)}}),e}(),r=!!(SmartPhone.isIOS()||SmartPhone.isAndroid()||SmartPhone.isWindowsMobile()||SmartPhone.isNexus()),i=e=>{let t={};if(""===e)return t;let n=e.split("&");for(let e in n){if(""===n[e])continue;let r=n[e].split("=");1===r.length||""===r[1]?t[decodeURIComponent(r[0])]=!0:t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t},o={user:"unknown",api_key:!1},s={host:window.location.host,hostname:window.location.hostname,pathname:window.location.pathname,href:window.location.href,referrer:document.referrer,is_mobile:r,user_agent:navigator.userAgent,platform:navigator.platform,query:i(window.location.search.substring(1))},a=()=>!!o.api_key||(n.error("Please check fix the included js library path, `src` link is missing api_key."),!1);t.setUser=function(e){o.user=e};let u=function(){return-1!=window.location.hostname.indexOf("localhost")};t.logEvent=async function(e,t){if(!a())return;t||(t={});let n={campaign:o,device:s,event:{name:e,id:uuidv4(),timestamp:(new Date).getTime(),payload:t}};n=function(e){var t={};return function e(n,r){if(Object(n)!==n)t[r]=n;else if(Array.isArray(n)){for(var i=0,o=n.length;i<o;i++)e(n[i],r+"["+i+"]");0==o&&(t[r]=[])}else{var s=!0;for(var a in n)s=!1,e(n[a],r?r+"."+a:a);s&&r&&(t[r]={})}}(e,""),t}(n);const r=(u()?"http://localhost:12000":"https://integrations.syncmedia.io")+"/v1.0/adlytics/js/events/capture";return 200==(await fetch(r,{method:"post",mode:"cors",referrer:"no-referrer",credentials:"omit",cache:"no-store",keepalive:!1,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).status},function(){let e=u()?"sm_capture":"https://storage.syncmedia.io/libs/sm_capture",n=document.getElementsByTagName("script");var r;for(r=0;r<n.length;r++)if(-1!=n[r].src.indexOf(e)){o=i(n[r].src.split("?")[1]);break}a()&&t.logEvent("open")}(),e.SMApp=t}.call(this);